# Ansible Tasks for Cowrie SSH/Telnet Honeypot
##############################################

# Available tags:
# - debug
# - never
# - always
# - update
# - root      -- this tags require sudo access
# - docker    -- for use with docker

# Prepare Operating System
# These tasks need to be executed as root
##############################################

- name: Update Python packages in Virtual Environment
  tags: [update]
  become: yes
  become_user: "{{ cowrie_user }}"
  pip:
    name: ['pip', 'setuptools']
    virtualenv: "{{ cowrie_venv }}"
    state: latest


- name: Install Python packages in Virtual Environment
  tags: [update]
  become: yes
  become_user: "{{ cowrie_user }}"
  pip:
    requirements: /opt/cowrie/cowrie/requirements.txt
    virtualenv: "{{ cowrie_venv }}"
    state: latest

- name: Install optional Python packages in Virtual Environment
  tags: [update,never]
  become: yes
  become_user: "{{ cowrie_user }}"
  pip:
    requirements: /opt/cowrie/cowrie/requirements-output.txt
    virtualenv: "{{ cowrie_venv }}"
    state: latest
